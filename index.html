<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>

    <title>greasy.js :: JavaScript dependency framework</title>

    <script type="text/javascript" src="sh_main.js"></script>
    <script type="text/javascript" src="sh_html.js"></script>
    <script type="text/javascript" src="sh_javascript.js"></script>

    <link type="text/css" rel="stylesheet" href="sh_style.css">

    <style>
        body {
          font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
          font-size: 15px;
          line-height: 22px;
          color: #252519;
          margin: 50px 0 50px 50px;
          padding: 0;
          width: 700px;
        }
        a, a:visited {
          color: #7A2E1F;
        }
        p {
          margin: 0 0 15px 0;
        }
        h1, h2, h3, h4, h5, h6 {
          margin: 0px 0 15px 0;
        }
          h1 {
            padding: 10px 0 20px 0;
          }
        
        pre, tt, code {
            font-size: 12px;
            line-height: 18px;
            font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
            margin: 0;
            padding: 4px 0px 4px 10px;
            border-left: 5px solid #e7e7e7;
        }

        pre.inline {
            border: 0;
            display: inline;
            padding: 0;
        }

        dt {
            font-style: italic;
        }

        .download {
            float: right;
        }
        .alias {
            display: inline-block;
            margin-left: 30px;
        }

    </style>
</head>
<body onload="sh_highlightDocument();">

<div class="download">
  <a href="http://github.com/FlamingTempura/greasy.js/zipball/master">
    <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
  <a href="http://github.com/FlamingTempura/greasy.js/tarball/master">
    <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
</div>

<h1>greasy.js</h1>
<a href="http://github.com/FlamingTempura/greasy.js"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

<h2>JavaScript dependency framework</h2>


<p>greasy.js allows you to separate your JavaScript-heavy application into components, which may be dependant on other components. This allows:
<ul>
    <li>Mitigating the use of large multi-purpose JavaScript files - instead you can keep each part (<em>component</em>) of your application in separate files,</li>
    <li>Reducing the need for HTML &lt;script&gt; tags - JavaScript components are loaded dynamically,</li>
    <li>Facilitating lazy-loading - only load components if and when they are needed.</li>
</ul></p>

<p>Requires <a href="http://jquery.com/">jQuery</a> and <a href="http://documentcloud.github.com/underscore/">underscore.js</a>.</p>

<ul class="menu">
    <li><a href="#download">Download<a></li>
    <li><a href="https://github.com/FlamingTempura/greasy.js">Hosted on GitHub</a></li>
    <!-- <li><a>Annotated source code</a></li> -->
    <li><a href="#usage">Usage</a></li>
    <li><a href="#api">API</a></li>
    <li><a href="animals-demo/index.html">Demo</a></li>
    <li><a href="#about">About</a></li>
    <li><a href="https://github.com/FlamingTempura/greasy.js/issues">Issues, bug reports and discussions</a></li>
</ul>

<a name="download"></a><h3>Download</h3>
<p>
  You can download this project in either
  <a href="http://github.com/FlamingTempura/greasy.js/zipball/master">zip</a> or
  <a href="http://github.com/FlamingTempura/greasy.js/tarball/master">tar</a> formats.
</p>
<p>You can also clone the project with <a href="http://git-scm.com">Git</a>
  by running:
  <pre>$ git clone git://github.com/FlamingTempura/greasy.js</pre>
</p>

<a name="usage"></a><h3>Usage</h3>

<p>Include greasy.js. greasy requires jQuery and underscore too.
<pre class="sh_html">
&lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;script src="underscore.js"&gt;&lt;/script&gt;

&lt;script src="greasy.js"&gt;&lt;/script&gt;
</pre>
</p>

<p>Each component that you create should have a name, which will be used to identify it later, and should be in it's own js file.</p>

<p>For example, Mammal.js contains the definition for the Mammal component:
<pre class="sh_javascript">
greasy.define(
    "Mammal", // Component name
    function (imports) {
        "use strict";
        var $ = imports.$;

        // Return an object defining the component
        return {
            hasSpine: function () {
                return true;
            }
        };
    }
);
</pre></p>

<p>greasy allows components to require the existence of other components and inheritance. For example, Human extends Mammal and requires Hat:
<pre class="sh_javascript">
greasy.define(
    "Human",
    {
        // Get the Hat component ready before proceeding
        require: ["Hat"],

        // Extend on the component Mammal
        extend: "Mammal"
    },
    function (imports) {
        "use strict";

        var $ = imports.$,
            greasy = imports.greasy;

        return {
            name: undefined,
            
            initialize: function (name, job, hatColour) {
                this.name = name;
            },

            sayHello: function () {
                return "Hello! My name is " + this.name + ".";
            },
        };
    }
);
</pre>
</p>

<p>The locations of each component need to be registered with greasy:
<pre class="sh_javascript">
greasy.register({
    "Mammal": "Mammal.js",
    "Human": "Human.js",
    "Hat": "Hat.js"
});
</pre></p>

<p><a href="animals-demo/index.html">See the full demo here.</a></p>


<a name="api"></a><h3>API</h3>

<h4>Contents</h4>

<h5>greasy</h5>
<p><a href="#setImports">setImports</a>, <a href="#setRoot">setRoot</a>, <a href="#register">register</a>, <a href="#define">define</a>, <a href="#require">require</a>, <a href="#get">get</a>, <a href="#create">create</a>, <a href="#createMany">createMany</a>, <a href="#noConflict">noConflict</a></p>

<h5>Component</h5>
<p><a href="#Component.create">create</a></p>

<h4>greasy</h4>
<dl>
    <dt><a name="setImports"></a>setImports(imports)</dt>
        <dd><dl>
            <dt>imports
                <dd>object that is given to all callbacks in requireComponents and defineComponent.</dd>
            </dl>
            <p>Callbacks on requireComponents and defineComponent are given imports as an argument. This allows those functions to access variables that would otherwise have to be global. imports.greasy is always available for access to the greasy object.</p>
            <p>Example:
<pre class="sh_javascript">
// Provide access to jQuery and underscore objects
greasy.setImports({
    jQuery: jQuery,
    _, _
});
</pre>
            </p></dd>
    
        <dt><a name="setRoot"></a>setRoot(rootURL)</dt>
        <dd><dl>
            <dt>rootURL
                <dd>URL which should be prepended to relative class URLs.</dd>
            </dl>
            <p>Example:
<pre class="sh_javascript">
// A root url may contain the domain
greasy.setRoot("http://example.com/classes/");
// Or not...
greasy.setRoot("/classes/");
// And it may be relative
greasy.setRoot("classes/");
</pre>
            </p></dd>

    <dt><a name="register"></a>register(components)<div class="alias"><b>alias:</b> registerComponents</div></dt>
        <dd><dl>
            <dt>components</dt>
                <dd>object of component-names to the filenames that they are defined in.</dd>
            </dl>
            <p>Register mappings of component-names to the filenames that they are defined in. If root has been set, root will be prepended to relative URLs.</p>
            <p>Example:
<pre class="sh_javascript">
greasy.registerComponents({
    "Mammal": "Mammal.js",
    "Human": "Human.js"
});</pre>
            </p></dd>

    <dt><a name="get"></a>get(componentName)</dt>
        <dd>
            <p>Get the component constructor for the given component name.</p>
            <p>Example:
<pre class="sh_javascript">
var Human = greasy.get("Human"),
    mike = new Human("Mike");
</pre>
            </p></dd>
    
    <dt><a name="create"></a>create(componentName[, arg1[, …[, argN] ])</dt>
        <dd><dl>
            <dt>componentName</dt>
                <dd>name of component that will be instanciated</dd>
            <dt>arg1, ..., argN</dt>
                <dd>arguments to be given to each initialize</dd>
            </dl>
            <p>Create an instantiation of the given component name.</p>
            <p>Example:
<pre class="sh_javascript">
// Create a human called Fred
var fred = greasy.create("Human", "Fred");
</pre>
            </p></dd>
    
    <dt><a name="createMany"></a>createMany(componentName, count[, arg1[, …[, argN] ])</dt>
    <dt>createMany(componentName, argumentsArray)</dt>
        <dd><dl>
            <dt>componentName</dt>
                <dd>names of component that will be instanciated</dd>
            <dt>count</dt>
                <dd>number of instanciations to create</dd>
            <dt>arg1, ..., argN</dt>
                <dd>arguments to be given to initialize of each</dd>
            <dt>argumentsArray</dt>
                <dd>array of arguments arrays to be given to initialize of each respectively</dd>
            </dl>
            <p>Create many instantiations of the given component name.</p>
            <p>Example:
<pre class="sh_javascript">
// Create some humans
var humans = greasy.get("Human", [ ["Nicola"], ["Nymphadora"], ["Natalia"] ]);
// Create 5 more humans, all called Bob
var bobs = greasy.createMany("Human", 5, "Bob");
</pre>
            </p></dd>

    <dt><a name="require"></a>require(componentNames[, callback])<div class="alias"><b>alias:</b> requireComponents</div></dt>
        <dd><dl>
            <dt>componentNames</dt>
                <dd>array of names of components that will be required within the callback</dd>
            <dt>callback</dt>
                <dd>function to be called once all components have loaded and executed</dd>
            </dl>
        <p>Returns a jQuery Deferred object that is resolved when all required components have been loaded.</p>
        <p>Example:
<pre class="sh_javascript">
greasy.requireComponents(
    ["Mammal"],
    function (imports) {
        var greasy = imports.greasy,
            Mammal = greasy.get("Mammal"),
            mammal = Mammal.create();
    }
);
</pre></p>
</dd>

    <dt><a name="define"></a>define(componentName, options, callback)<div class="alias"><b>alias:</b> defineComponent</div></dt>
        <dd><dl>
            <dt>componentName<dt>
                <dd>name of the component that is to be defined</dd>
            <dt>options</dt>
                <dd>object containing any of the following options:
                <dl>
                    <dt>require</dt><dd>array of other components that will be required
                    <dt>extend</dt><dd>a component name or function that the class should extend on.</dd>
                </dl>
                </dd>
            <dt>callback</dt>
                <dd>function to be called once requirements have been fulfilled. Must return an object to be used as the prototype for the components constructor.</dd>
            </dl>

        <p>Example:
<pre class="sh_javascript">
greasy.define(
    "Human",
    {
        // Get the Hat component ready before proceeding
        require: ["Hat"],

        // Extend on the component Mammal
        extend: "Mammal"
    },
    function (imports) {
        "use strict";

        var $ = imports.$,
            greasy = imports.greasy;

        return {
            name: undefined,
            job: undefined,
            hat: undefined,
            
            initialize: function (name, job, hatColour) {
                this.name = name;
                this.job = job;
                this.hat = greasy.create("Hat", hatColour);
            },

            sayHello: function () {
                return "Hello! My name is " + this.name + 
                    " and I am the " + this.job + ".";
            },

            aboutHat: function () {
                return "I am wearing a hat. " + this.hat.describe();
            },
        };
    }
);
</pre></p>
        <p>

        <p>It is possible to extend on existing functions. For example, we can extend on <a href="http://documentcloud.github.com/backbone/">Backbone</a>.View:
<pre class="sh_javascript">
greasy.define(
    "Human",
    {
        // Extend on the Backbone's View
        extend: Backbone.View
    },
    function (imports) {
        "use strict";

        /* Private things */

        return {
            /* Public things */
        };
    }
);
</pre>
        </p>
    </dd>

    <dt><a name="noConflict"></a>noConflict()</dt>
        <dd>
            <p>Do not use greasy global variable. Returns greasy object.</p>
            <p>Example:
<pre class="sh_javascript">
var greasy = greasy.noConflict();
</pre>
            </p></dd>

</dl>

<h4>Component</h4>
<dl>
    <dt><a name="Component.create"></a>create</dt>
        <dd>
        <p>creates a Greasy object. Same as calling <pre class="inline sh_javascript">new Component(arguments)</pre></p>
        <p>Example:
<pre class="sh_javascript">
var Human = greasy.get("Human"),
    mike = Human.create("Mike");
</pre>
        </p>
        </dd>
</dl>


<a name="about"></a><h3>About</h3>

<p>greasy.js was developed by Peter West (FlamingTempura). It is released under the MIT license.</p>

Get the source code on GitHub : <a href="http://github.com/FlamingTempura/greasy.js">FlamingTempura/greasy.js</a>
</body>
</html>
